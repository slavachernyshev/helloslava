---
title: Связность (coupling) и сплоченность (cohesion)
description: В проектировании программного обеспечения используются два термина - связность (coupling) и сплоченность (cohesion). Основной подход заключается в том, что связность должна быть низкой, а сплоченность высокой. Такой подход во многих случаях помогает разобраться, как правильно сформировать подразделение кибербезопасности, чтобы попытаться исключить возможные конфликтные ситуации, когда один процесс и его источники данных расползается на несколько отделов.
theme: Структура
ttr: 11 минут
preview: 2021-07-29-CC-05.png
---

В&nbsp;проектировании программного обеспечения используются два термина: связность (coupling) и&nbsp;сплоченность (cohesion). Основной подход заключается в&nbsp;том, что связность должна быть низкой, а&nbsp;сплоченность высокой.

<Note label="Определения">
<p><b>Связность (Coupling)</b></p>
<p>Под связностью понимают степень зависимости между отдельными единицами, выполняющими определённую задачу (модулями) // <i>Coupling is&nbsp;the measure of&nbsp;the degree of&nbsp;interdependence between the modules.</i></p>
<p><b>Сплоченность (Cohesion)</b></p>
<p>Под сплоченностью понимают степень функциональной связности между собой элементов одного модуля. То&nbsp;есть своеобразный клей, который держит все элементы модуля вместе. // <i>Cohesion is&nbsp;a&nbsp;measure of&nbsp;the degree to&nbsp;which the elements of&nbsp;the module are functionally related. It&nbsp;is&nbsp;the degree to&nbsp;which all elements directed towards performing a&nbsp;single task are contained in&nbsp;the component. Basically, cohesion is&nbsp;the internal glue that keeps the module together.</i></p>
</Note>

![Связность и сплоченность](~/assets/images/2021-07-29-CC/2021-07-29-CC-01.png)

Такой подход во&nbsp;многих случаях помогает разобраться, как правильно сформировать подразделение кибербезопасности, чтобы попытаться исключить возможные конфликтные ситуации, когда один процесс и&nbsp;его источники данных расползается на&nbsp;несколько отделов. Это всё плохо влияет на <nuxt-link :to="{ name: 'posts-slug', params: { slug: '2021-07-27-SX' } }">Security Experience (SX)</nuxt-link> и в целом ухудшает результаты работы. Поэтому давайте разбирёмся в&nbsp;этих терминах и&nbsp;как их&nbsp;использовать чуть глубже.

<hr>

## Разница между связностью и сплоченностью

Начнём с того, что закрепим у себя в голове разницу между этими понятиями. Ниже в табличке я набросал различия по основным направлениям. Я буду придерживаться программерской терминологии, используя слово `модуль` вместо `подразделения` или `отдела`. Можно было бы, конечно, использовать `организационная единица`, но меня от него немного выворачивает.

|Связность|Сплоченность|
|---------|------------|
|Относится к взамодействию между двумя и более модулями|Относится к взаимодействию между двумя и более элементами одного модуля|
|Фокусируется на измерении зависимости модуля от других модулей|Фокусируется на измерении функциональной силы (полноты) модуля|
|Идеально иметь низко связанные модули|Идеально иметь модули с высокой сплочённостью, когда реализация какой-либо дополнительной функциональности происходит без коммуникаций или с малым количеством коммуникаций с другими модулями|
|Невозможно достичь полного отсутствия связности между модулями|Возможно создавать полностью сплочённые модули|

<hr>

## Как оценивается связность (coulping)

Обычно используется вот такая шкала при анализе связности модулей (смотри рисунок). Довольно тяжело перевести эти термины в&nbsp;русскоязычный вариант (вариант [википедии](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D1%86%D0%B5%D0%BF%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)) с&nbsp;&laquo;зацеплениями&raquo; вызывает кровь из&nbsp;глаз), поэтому давайте ориентироваться на&nbsp;английские термины, а&nbsp;я&nbsp;дальше просто дам им&nbsp;корректные определения и&nbsp;примеры на&nbsp;русском.

<Note>
Хорошей альтернативой бедной информации в&nbsp;википедии по&nbsp;данному вопросу является вот <a href="https://www.chegg.com/learn/computer-science/computer-software/module-coupling">этот</a> ресурс, но&nbsp;там английский и&nbsp;слишком по-программерски.
</Note>

![Шкала для связности](~/assets/images/2021-07-29-CC/2021-07-29-CC-02.png)

- [__Data Coupling__](https://www.chegg.com/learn/computer-science/computer-software/data-coupling): Если зависимость между модулями основана на&nbsp;том, что они взаимодействуют, передавая только конкретные данные друг другу, то&nbsp;говорят, что модули связаны по&nbsp;данными. В&nbsp;случае такой связи модули практически независимы друг от&nbsp;друга. Отличный примером может являться&nbsp;то, когда между&nbsp;ИТ и&nbsp;ИБ в&nbsp;части патчинга существует такой интерфейс: вторые присылают первым название сервера и&nbsp;перечень нужных патчей, первые после патчинга выдают ок&nbsp;или не&nbsp;ок. В&nbsp;данном случае&nbsp;ИТ и&nbsp;ИБ связаны по&nbsp;данным.

- [__Stamp Coupling__](https://www.chegg.com/learn/computer-science/computer-software/stamp-coupling): Такая связь между модулями возникает, когда модули используют какую-то одну структуру данных (возможно разные части этой структуры). Тут ситуация несколько запутанная, и, как правило, заключается в&nbsp;последовательном использовании и&nbsp;изменении данной структуры из-за чего происходят различные негативные side-эффекты. Например, отчет о&nbsp;сканировании получает сначала отдел рисков, у&nbsp;которого есть свои механизмы для исключения не&nbsp;важных с&nbsp;точки зрения оценки рисков уязвимостей. Они эту информацию удаляют из&nbsp;отчета и&nbsp;пересылают отчет в&nbsp;SOC, который не&nbsp;предполагает, что из&nbsp;отчёта было что-либо удалено, и&nbsp;не&nbsp;проводит анализ логов на&nbsp;предмет того, могли&nbsp;ли эти удаленные рисковиками уязвимости быть использованы злоумышленником ранее.

- [__Control Coupling__](https://www.chegg.com/learn/computer-science/computer-software/control-coupling): Если модули передают друг другу какую-то управляющую информацию (один модуль контроллирует выполнение процессов в&nbsp;другом), то&nbsp;говорят, что они связаны по&nbsp;управлению. Например, процессы организованы таким образом, что один отдел управляет действиями другого отдела, находящегося на&nbsp;одном с&nbsp;ним уровне. Это плохо, так как текущие задачи одного из&nbsp;отделов могут быть поставлены на&nbsp;паузу из-за задачи, которая важной кажется только второму отделу.

- [__External Coupling__](https://www.chegg.com/learn/computer-science/computer-software/external-coupling): Внешняя связность выражается в&nbsp;том, что два или много модулей одновременно зависят от&nbsp;одного внешнего фактора. Например, два отдела пользуются одной системой (или аутсорсером, аутстаффером и&nbsp;т.д.). Один из&nbsp;отделов вносит значимые изменения в&nbsp;систему, из-за которых второй отдел не&nbsp;может выполнять свою работу.

- [__Common Coupling__](https://www.chegg.com/learn/computer-science/computer-software/common-coupling): Модули используют общие (глобальные) структуры данных. Например, совместно используют результаты сканирования на&nbsp;уязвимости для принятия различных решений (SOC&nbsp;&mdash; что мониторить, отдел рисков&nbsp;&mdash; для переоценки рисков). Ошибка в&nbsp;таких данных может привести к&nbsp;принятию неверных решений в&nbsp;обоих отделах. А&nbsp;если вдруг SOC потребовались, к&nbsp;примеру, данные сканирования в&nbsp;другой нотации, то&nbsp;ему потребуется подождать, пока к&nbsp;соответствующему варианту подготовится отдел управления рисками (переделает свои процедуры).

- __Content Coupling:__ Например, есть отдел, который занимается управлением активами (инвентаризация, уязвимости и&nbsp;т.д.), и&nbsp;есть другой отдел, который занимается расчётом рисков. Очевидно, что они используют одну и&nbsp;ту&nbsp;же структуру&nbsp;&mdash; какой-то инвентаризационный лист активов. Если вдруг, первый отдел решит изменить свой подход к&nbsp;ведению данного инвентаризационного листа, то&nbsp;неизбежно изменится и&nbsp;качество оценки рисков (предположительно, для возврата к&nbsp;нормальному состоянию потребуется изменение процедур оценки рисков). Или, и&nbsp;SOC и&nbsp;отдел рисков используют общую базу инцидентов, в&nbsp;которую вносят каждый свои изменения. Рисковики могут дополнить такую базу, какими-то специфическими инцидентами для корректного принятия решений по&nbsp;рискам, а&nbsp;SOC в&nbsp;своем post-mortem анализе вдруг видит что-то не&nbsp;совсем&nbsp;то, что ожидалось.

<hr>

## Как оценивается сплочённость (cohesion)

Здесь у&nbsp;нас другая шкала (в&nbsp;некоторой степени довольно похожая на&nbsp;шкалу, использованную для связности). С&nbsp;наименованиями в&nbsp;шкале я&nbsp;поступил аналогично связности&nbsp;&mdash; переводить не&nbsp;стал. Некоторые из&nbsp;степеней сплоченности можно также пройти почитать&nbsp;на [Chegg](https://www.chegg.com/learn/computer-science/computer-software/module-cohesion) на&nbsp;английском, там гораздо больше полезной информации (в&nbsp;том числе плюсов и&nbsp;минусов конкретных вариантов сплоченности).

![Шкала для сплоченности](~/assets/images/2021-07-29-CC/2021-07-29-CC-03.png)

- [__Functional Cohesion__](https://www.chegg.com/learn/computer-science/computer-software/functional-cohesion): В&nbsp;одном модуле собираются все необходимые (важные) элементы, чтобы выполнять какое-либо одно конкретное действие (или ряд похожих). Как пример, это может быть объединение под одну крышу управления активами с&nbsp;оценкой рисков, так как последнее зависит от&nbsp;того, как происходит управление активами. Так можно быть увереным, что результаты оценки рисков не&nbsp;будут чем-то тёплым на&nbsp;лопате, как минимум из-за плохих данных по&nbsp;активам.

<Note label="Лирическое отступление">
<div class="space-y-1">
    <div>CISO: <i>Сколько у нас windows-хостов?</i></div>
    <div>Админ антивируса: <i>7864</i></div>
    <div>EDR-команда: <i>6722</i></div>
    <div>CMDB-команда: <i>4848</i></div>
    <div>SIEM-команда: <i>9342</i></div>
    <div>CISO: ¯\_(ツ)_/¯</div>
</div>
</Note>

- [__Sequential Cohesion__](https://www.chegg.com/learn/computer-science/computer-software/sequential-cohesion): Результаты одной из&nbsp;функций модуля являются входными данными для других функций модуля. Это похоже на&nbsp;предыдущий пример с&nbsp;управлением активами и&nbsp;рисками. То&nbsp;есть если из&nbsp;примера выше разделить управление активами и&nbsp;оценку рисков по&nbsp;разным отделам, то&nbsp;мы&nbsp;получим как раз таки последовательную сплоченность вместо функциональной.

- [__Communicational Cohesion__](https://www.chegg.com/learn/computer-science/computer-software/communicational-cohesion): Когда функции модуля работают надо одними и&nbsp;теми&nbsp;же данными. Возвращаясь к&nbsp;нашим активам и&nbsp;рискам, эта сплоченность выражается в&nbsp;работе над одной и&nbsp;той&nbsp;же базой данных активов в&nbsp;какой-нибудь GRC-системе. Это позволяет обеим функциям коммуницировать на&nbsp;основании одного Golden Source источника.

- __Procedural Cohesion__: Функции группируются в&nbsp;один модуль, потому что они выполняются в&nbsp;определенной последовательности, согласно некой процедуре. Хорошим примером может быть реагирование на&nbsp;инциденты, где у&nbsp;нас последовательно выполняются функции регистрации иницдента, обработки инцидента, взаимодействия с&nbsp;третьими лицами, репортинг, post-mortem (последовательность и&nbsp;содержание этапов может варьироваться в&nbsp;зависимости от&nbsp;компании).

- [__Temporal Cohesion__](https://www.chegg.com/learn/computer-science/computer-software/temporal-cohesion): Различные функции модуля объединются только во&nbsp;время определенного интервала. Например, результаты аудита могут запустить все функции (в&nbsp;зависимости от&nbsp;результатов аудита), связанные с&nbsp;устранением выявленных проблем, как в&nbsp;управлении доступом, так&nbsp;и, к&nbsp;примеру, в&nbsp;управлении инцидентами или уязвимостями. Лучше всего это объясняется на&nbsp;примере человека, который собирается пойти спать: ему нужно почистить зубы (модуль &laquo;здоровье&raquo;), проверить двери (модуль &laquo;безопасность&raquo;), выключить электронные приборы (модуль &laquo;финансы&raquo;), прочитать молитву (модуль &laquo;душа&raquo;).

- [__Logical Cohesion__](https://www.chegg.com/learn/computer-science/computer-software/logical-cohesion): Функции модуля связаны только логически, но&nbsp;не&nbsp;функционально. Здесь довольно тяжело привести пример из&nbsp;мира кибербезопасности, так как такие связи встречаются очень редко. Ну, допустим, есть функция пен-теста и&nbsp;функция выявления информации об&nbsp;уязвимостях из&nbsp;открытых источников (мониторинг новостей вендоров, форумов и&nbsp;т.п.). Обе функции логически про одно&nbsp;&mdash; найти уязвимости. Но&nbsp;выполняются абсолютно по&nbsp;разному и&nbsp;друг с&nbsp;другом функционально не&nbsp;связаны.

- __Coincidental Cohesion__: Функции модуля не&nbsp;связаны друг с&nbsp;другом. Например, размещение в&nbsp;одном отделе функций по&nbsp;управлению уязвимостями и&nbsp;комплайенса. Очевидно, что это худшая форма сплоченности, которая может быть обоснована только какими-то внешними факторами: квалификацией, необходимостью выполнить требования по&nbsp;численности отдела и&nbsp;т.д.

<hr>

## Ну ок и что дальше?

Вспоминая начало:

> Считается, что связность (coupling) должна быть низкой, а сплоченность (cohesion) высокой.

Идеальной ситуацией для нас было&nbsp;бы такое разделение функций, чтобы между отделами у&nbsp;нас был `data`&nbsp;/ `stamp` coupling, а&nbsp;внутри отделов у&nbsp;нас все функции были `functional`&nbsp;/ `sequential`&nbsp;/ `communicational` cohesion. Как&nbsp;же этого добится? Универсальных способов нет. Покажу пару своих подходов.

__Coupling__: очень помогает нарисовать [шину данных](https://ru.wikipedia.org/wiki/%D0%A8%D0%B8%D0%BD%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85) и&nbsp;на&nbsp;неё нанизывать различные подразделения, которые вносят свой кусок информации в&nbsp;шину. Изначально при проектировании всё взаимодействие должно крутиться вокруг манифестов, описывающих входные и&nbsp;выходные данные. В&nbsp;дальнейшем такую шину можно реализовать на&nbsp;каком-нибудь программном продукте.

![Шина данных](~/assets/images/2021-07-29-CC/2021-07-29-CC-04.png)

Понятное дело, что такой абстракцией всех вопросов не&nbsp;решишь, но&nbsp;как начало для попытки уменьшить связность вполне сойдёт.

__Cohesion__: хорошей практикой выглядит взять стандарт с&nbsp;максимальным количеством контролей (идеальным будет [NIST 800-53](https://csrc.nist.gov/publications/detail/sp/800-53/rev-5/final)) и&nbsp;смотреть, как функции безопасности в&nbsp;нём распределены по&nbsp;различным семействам, Как правило, внутри группы (семейства) контролей существует или `sequential` cohesion, или `communicational` cohesion. Для упрощенных вариантов можно взять меры из&nbsp;ФСТЭКовских документов, но&nbsp;там есть группа ЗИС (Защита информационной (автоматизированной) системы и&nbsp;ее&nbsp;компонентов), в&nbsp;которой такая каша...

Идеальный результат такого проектирования должен выглядить плюс-минус так (сверху то, что было до проектирования):

![Низкая связность и высокая сплоченность](~/assets/images/2021-07-29-CC/2021-07-29-CC-05.png)

## Итого и немного про силос

Конечно, организационная структура часто размечается исходя из&nbsp;других факторов, например:

- амбиции отдельных членов вашей команды (&laquo;или так, или ухожу&raquo;),
- их&nbsp;компетенции (тяжело отдать управление уязвимостями от&nbsp;человека, который собаку на&nbsp;этом съел, другому, кто этим не&nbsp;занимался только ради какого-то эфемерного `functional cohesion`),
- размера команды, когда среди пары десятков человек (или вообще пары человек) проводить какой-либо coupling&nbsp;/ cohesion анализ равно разогревать океан кипятильником.

Coupling&nbsp;/ cohesion анализ является хорошим стартовым упражнением для больших команд, особенно, когда в&nbsp;таких командах возникают проблемы с&nbsp;расползанием процессов по&nbsp;нескольким отделам и&nbsp;все друг-другом недовольны в&nbsp;этих процессах (привет, управлению уязвимостями, DevSecOps-у и&nbsp;прочим комбайнам кибербезопасности).

Стоит помнить, что данный подход приводит к&nbsp;изоляции отделов друг от&nbsp;друга, а&nbsp;это ведёт, как любят говорить всякие McKinsey и&nbsp;Gartner к `silos`.

> __Silo mentality__ &mdash; a mindset present when certain departments or sectors do not wish to share information with others in the same company ([википедия](https://en.wikipedia.org/wiki/Information_silo)) // образ мысли, когда отделы не желают делиться информацией друг с другом.

То есть отделы перестают иметь какие-то общие цели в своих действиях и каждый фокусируется исключительно на своих целях (возникает плохой <nuxt-link :to="{ name: 'posts-slug', params: { slug: '2021-07-27-SX' } }">Security Experience (SX)</nuxt-link>). Как правило, такая ситуация возникает не сразу, а через какое-то время накопления конфликтов между руководителями. Решение этого вопроса не всегда простое и как правило базируется на переключении менеджеров из менталитета «мой отдел» в менталитет «наша организация». Есть различные методы, как попробовать это сделать, но об этом в другом посте.